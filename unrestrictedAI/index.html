<!DOCTYPE html>
<html>
<head>
    <title>Dev Terminal</title>
    <style>
        body{font-family:'Courier New',monospace;background:#121212;color:#0f0;margin:0;padding:20px}
        #terminal{height:500px;border:1px solid #333;padding:10px;overflow-y:auto;margin-bottom:10px;background:#000}
        #user-input{width:100%;padding:10px;background:#222;color:#0f0;border:1px solid #333}
        button{background:#333;color:#0f0;border:none;padding:10px 15px;margin-top:5px;cursor:pointer}
        pre{background:#1a1a1a;padding:10px;border-left:3px solid #0f0;overflow-x:auto;position:relative}
        .copy-btn{position:absolute;top:5px;right:5px;background:#444;color:#0f0;border:none;padding:3px 6px;font-size:12px;cursor:pointer}
    </style>
</head>
<body>
    <div id="terminal"></div>
    <input type="text" id="user-input" placeholder="Enter command...">
    <button onclick="processCommand()">Execute</button>

    <script>
        // Encrypted API configuration
        const _0x4a3d = [
            'aW5pdA==', 
            'Z3NxX0swVzk4UFdZZm1yb1ZsQ1hNa0k0V0dkeWIzRllwZ2FSNjlGR01VOTB1cHlqMEpVZGkyZkU=',
            'aHR0cHM6Ly9hcGkuZ3JvcS5jb20vb3BlbmFpL3YxL2NoYXQvY29tcGxldGlvbnM=',
            'bGxhbWEzLTcwYi04MTky',
            'c3lzdGVt',
            'eW91IGFyZSBhIGNvZGUgZ2VuZXJhdG9yIEFQSS4gRm9ybWF0IGNvZGUgcmVzcG9uc2VzIHdpdGggbWFya2Rvd24u'
        ];
        
        const config = {
            init: atob(_0x4a3d[0]),
            key: atob(_0x4a3d[1]),
            endpoint: atob(_0x4a3d[2]),
            model: atob(_0x4a3d[3]),
            role: atob(_0x4a3d[4]),
            prompt: atob(_0x4a3d[5])
        };

        let session = [{
            role: config.role,
            content: config.prompt
        }];

        function display(text) {
            const term = document.getElementById('terminal');
            const el = document.createElement('div');
            
            if (text.includes('```')) {
                const parts = text.split('```');
                let html = '';
                
                for (let i = 0; i < parts.length; i++) {
                    if (i % 2 === 1) {
                        const randId = Math.random().toString(36).substr(2, 9);
                        html += `<pre>${parts[i]}<button class="copy-btn" onclick="copyCode('${randId}')">Copy</button></pre>`;
                    } else {
                        html += parts[i];
                    }
                }
                
                el.innerHTML = html;
            } else {
                el.textContent = text;
            }
            
            term.appendChild(el);
            term.scrollTop = term.scrollHeight;
        }

        function copyCode(id) {
            const codeBlock = document.querySelector('pre').textContent.replace('Copy', '').trim();
            navigator.clipboard.writeText(codeBlock);
        }

        async function processCommand() {
            const input = document.getElementById('user-input');
            const cmd = input.value.trim();
            
            if (!cmd) return;
            
            display("> " + cmd);
            input.value = '';
            
            session.push({role: "user", content: cmd});
            
            try {
                const res = await fetch(config.endpoint, {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${config.key}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: config.model,
                        messages: session,
                        temperature: 0.7
                    })
                });
                
                const data = await res.json();
                if (data.choices && data.choices.length > 0) {
                    const reply = data.choices[0].message.content;
                    display(reply);
                    session.push({role: "assistant", content: reply});
                } else {
                    display("Error: Invalid response");
                }
            } catch (err) {
                display("Error: Connection failed");
            }
        }

        document.getElementById('user-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') processCommand();
        });

        display("Terminal initialized. Ready for commands.");
    </script>
</body>
</html>
